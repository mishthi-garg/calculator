<!DOCTYPE html>
<html>

<head>
  <title>
    Calculator
  </title>
  <link rel="stylesheet" href="calculator.css">
</head>

<body>
  <p class="js-expression"></p>
  <div class="calculator-buttons">

    <button class="numbers" onclick="
      updateCalculation('1');
      "> 1 </button>
    <button class="numbers" onclick="
      updateCalculation('2');
      "> 2 </button>
    <button class="numbers" onclick="
      updateCalculation('3');
      "> 3 </button>

    <button class="operation" onclick="
      updateCalculation('/');
      "> / </button>

    <button class="numbers" onclick="
      updateCalculation('4');
      "> 4 </button>
    <button class="numbers" onclick="
      updateCalculation('5');
      "> 5 </button>
    <button class="numbers" onclick="
      updateCalculation('6');
      "> 6 </button>

    <button class="operation" onclick="
      updateCalculation('*');
      "> * </button>
    <button class="numbers" onclick="
      updateCalculation('7');
      "> 7 </button>
    <button class="numbers" onclick="
      updateCalculation('8');
      "> 8 </button>
    <button class="numbers" onclick="
      updateCalculation('9');
      "> 9 </button>

    <button class="operation" onclick="
      updateCalculation('-');
      "> - </button>
      <button class="numbers" onclick="
      updateCalculation('.');
      "> . </button>
    <button class="numbers" onclick="
      updateCalculation('0');
      "> 0 </button>

    <button class="operation" onclick="
      updateCalculation('+');
      "> + </button>

    <button class="equals" onclick="
      updateCalculation('=');
      "> = </button>
      <button class="clear" onclick="
      updateCalculation('C');
      "> Clear </button>
  </div>
  

  <script>
    let calculation=JSON.parse(localStorage.getItem('calculation')) || '0';
    let justEvaluated = false;
    console.log(calculation);
    document.querySelector('.js-expression').innerHTML = `${calculation}`;

    function updateCalculation(entry){

      const operators = ['+','-','*','/'];
      if(entry === '='){
        calculation= eval(calculation);
        justEvaluated = true;
        console.log(calculation);
      }
      else if(entry === 'C'){
        calculation = '0';
        justEvaluated = true;
        console.log(calculation);
        localStorage.removeItem('calculation');
      }
      else{
        if(justEvaluated && !operators.includes(entry)){
          calculation = entry;
          justEvaluated = false;
        }
        else{
          if(operators.includes(entry)){
            calculation+= ' '+entry+' ';
            console.log(calculation);
          }
          else{
            calculation += entry;
            console.log(calculation);
          }
          justEvaluated = false;
        }
        
      }
      localStorage.setItem('calculation',JSON.stringify(calculation));
      document.querySelector('.js-expression').innerHTML = `${calculation}`;
    }
  </script>
</body>

</html>